(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00fc1ae4"],{2355:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[t.carts.total>0?a("div",{staticClass:"container my-5"},[a("div",{staticClass:"card rounded-0 border-0 mb-3"},[t._m(0),a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover"},[t._m(1),a("tbody",t._l(t.carts.carts,(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn del-cart",on:{click:function(a){return t.delCart(s.id)}}},[t._v("×")])]),a("td",{staticClass:"align-middle"},[a("img",{attrs:{src:s.product.imageUrl,width:"80",height:"64"}})]),a("td",{staticClass:"align-middle text-nowrap text-truncate"},[t._v(" "+t._s(s.product.title)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currency")(s.product.price))+" ")]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(s.qty)+" / "+t._s(s.product.unit)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currency")(s.total))+" ")])])})),0)])])])]),a("div",{staticClass:"row justify-content-between mb-3"},[a("div",{staticClass:"form-group col-lg-4 text-left"},[a("label",{attrs:{for:"coupon-code"}},[t._v("優惠折扣碼")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",id:"coupon-code",placeholder:"請輸入折扣碼 e.g., ABC1111"},domProps:{value:t.coupon_code},on:{input:function(s){s.target.composing||(t.coupon_code=s.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-dark",on:{click:function(s){return t.useCoupon(t.coupon_code)}}},[t._v("送出")])])]),""!==t.is_used?a("span",{class:{"text-success":t.is_used,"text-danger":!t.is_used}},[t._v(t._s(t.message))]):t._e()]),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"card"},[t._m(2),a("table",{staticClass:"table table-hover"},[a("tr",[a("th",{staticClass:"text-left"},[t._v("小計")]),a("td",{staticClass:"text-right align-middle"},[t._v(t._s(t._f("currency")(t.carts.total)))])]),a("tr",[a("th",{staticClass:"text-left"},[t._v("折扣")]),a("td",{staticClass:"text-right text-danger align-middle"},[t._v(t._s(t._f("currency")(t.carts.total-t.carts.final_total)))])]),a("tr",[a("th",{staticClass:"text-left"},[t._v("總計")]),a("td",{staticClass:"text-right text-success h5 align-middle"},[t._v(t._s(t._f("currency")(t.carts.final_total)))])])]),a("div",{staticClass:"text-right"},[a("router-link",{staticClass:"btn btn-outline-dark btn-lg btn-block rounded-0 btn-cash",attrs:{to:"order"}},[t._v("Next")])],1)])])])]):a("div",{staticClass:"container my-5"},[a("h2",[t._v("還沒買東西喔！先去逛逛吧！")]),a("router-link",{staticClass:"btn btn-outline-dark btn-block btn-lg",attrs:{to:"products"}},[t._v("去購物")])],1)])},c=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"card-header d-flex justify-content-between bg-dark "},[a("h2",{staticClass:"card-title mb-0 text-white"},[t._v("購物車清單")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("tr",[a("th",{attrs:{width:"30"}}),a("th",{attrs:{width:"90"}}),a("th",[t._v("商品")]),a("th",{attrs:{width:"120"}},[t._v("價格")]),a("th",{attrs:{width:"120"}},[t._v("數量")]),a("th",[t._v("小計")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"card-header bg-dark"},[a("h2",{staticClass:"bg-dark card-title text-white mb-0"},[t._v("金額")])])}],i=(a("99af"),{data:function(){return{coupon_code:"",message:"",is_used:""}},methods:{updateCart:function(){this.$store.dispatch("updateCart")},delCart:function(t){this.$store.dispatch("removeCart",t),this.$bus.$emit("message:push","已從購物車刪除商品","success")},useCoupon:function(t){var s=this,a=this,e="".concat("https://vue-course-api.hexschool.io/","api/").concat("myfurnitureshop","/coupon");this.$store.dispatch("updateLoading",!0),console.log(e);var c={code:a.coupon_code};a.$http.post(e,{data:c}).then((function(t){console.log(t.data),a.is_used=t.data.success,a.message=t.data.message,a.updateCart(),s.$store.dispatch("updateLoading",!1)}))}},computed:{carts:function(){return this.$store.state.carts}},created:function(){this.updateCart()}}),r=i,n=(a("5ddc"),a("2877")),o=Object(n["a"])(r,e,c,!1,null,"2b486d05",null);s["default"]=o.exports},"5ddc":function(t,s,a){"use strict";var e=a("c2fa"),c=a.n(e);c.a},c2fa:function(t,s,a){}}]);
//# sourceMappingURL=chunk-00fc1ae4.285f1e84.js.map