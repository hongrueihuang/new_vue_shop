{"version":3,"sources":["webpack:///./src/views/backend/CouponsList.vue?d0c6","webpack:///src/views/backend/CouponsList.vue","webpack:///./src/views/backend/CouponsList.vue?b899","webpack:///./src/views/backend/CouponsList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","$event","openModal","_m","_l","item","key","id","_s","title","code","percent","fullDate","openDelModal","attrs","directives","name","rawName","value","tempCoupon","expression","domProps","target","composing","$set","formatDate","Array","isArray","is_enabled","_i","_q","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","updateCoupon","removeCoupon","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d0de121.8cf07ade.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"d-flex justify-content-between my-2\"},[_c('h1',{staticClass:\"h3\"},[_vm._v(\"優惠券列表\")]),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.openModal(true)}}},[_vm._v(\"建立新優惠券\")])]),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header text-left h5\"},[_vm._v(\"優惠券總覽\")]),_c('div',{staticClass:\"card-body\"},[_c('table',{staticClass:\"table table-striped\"},[_vm._m(0),_c('tbody',_vm._l((_vm.coupons),function(item){return _c('tr',{key:item.id},[_c('td',{staticClass:\"align-middle\"},[_vm._v(_vm._s(item.title))]),_c('td',{staticClass:\"align-middle\"},[_vm._v(_vm._s(item.code))]),_c('td',{staticClass:\"align-middle\"},[_vm._v(_vm._s(item.percent))]),_c('td',{staticClass:\"align-middle\"},[_vm._v(_vm._s(item.fullDate))]),_c('td',{staticClass:\"align-middle\"},[(item.is_enabled)?_c('span',{staticClass:\"text-success\"},[_vm._v(\"啟用\")]):_c('span',{staticClass:\"text-danger\"},[_vm._v(\"未啟用\")])]),_c('td',{staticClass:\"align-middle\"},[_c('div',{staticClass:\"btn-group\"},[_c('button',{staticClass:\"btn btn-outline-warning btn-sm\",on:{\"click\":function($event){return _vm.openModal(false, item)}}},[_vm._v(\"編輯\")]),_c('button',{staticClass:\"btn btn-outline-danger btn-sm\",on:{\"click\":function($event){return _vm.openDelModal(item)}}},[_vm._v(\"刪除\")])])])])}),0)])])]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"couponModal\",\"tabindex\":\"-1\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-lg\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header bg-dark\"},[_c('h5',{staticClass:\"modal-title text-white\",attrs:{\"id\":\"exampleModalLabel\"}},[(_vm.isNew)?_c('span',[_vm._v(\"新增\")]):_c('span',[_vm._v(\"修改\")]),_vm._v(\"產品\")]),_vm._m(1)]),_c('div',{staticClass:\"modal-body\"},[_c('form',{staticClass:\"form-row\"},[_c('div',{staticClass:\"col-4\"},[_c('div',{staticClass:\"form-group text-left\"},[_c('label',{attrs:{\"for\":\"coupon-title\"}},[_vm._v(\"請輸入優惠券名稱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.title),expression:\"tempCoupon.title\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"coupon-title\"},domProps:{\"value\":(_vm.tempCoupon.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"title\", $event.target.value)}}})])]),_c('div',{staticClass:\"col-4\"},[_c('div',{staticClass:\"form-group text-left\"},[_c('label',{attrs:{\"for\":\"coupon-code\"}},[_vm._v(\"請輸入折扣碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.code),expression:\"tempCoupon.code\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"coupon-code\"},domProps:{\"value\":(_vm.tempCoupon.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"code\", $event.target.value)}}})])]),_c('div',{staticClass:\"col-4\"},[_c('div',{staticClass:\"form-group text-left\"},[_c('label',{attrs:{\"for\":\"coupon-percent\"}},[_vm._v(\"請輸入折扣\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.percent),expression:\"tempCoupon.percent\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"coupon-percent\"},domProps:{\"value\":(_vm.tempCoupon.percent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"percent\", $event.target.value)}}})])]),_c('div',{staticClass:\"col-4\"},[_c('div',{staticClass:\"form-group text-left\"},[_c('label',{attrs:{\"for\":\"coupon-date\"}},[_vm._v(\"請輸入到期日\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.fullDate),expression:\"tempCoupon.fullDate\"}],staticClass:\"form-control\",attrs:{\"type\":\"date\",\"id\":\"coupon-date\"},domProps:{\"value\":(_vm.tempCoupon.fullDate)},on:{\"change\":function($event){return _vm.formatDate(_vm.tempCoupon.fullDate)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempCoupon, \"fullDate\", $event.target.value)}}})])]),_c('div',{staticClass:\"col-4 d-flex justify-content-end align-items-center\"},[_c('div',{staticClass:\"form-check pl-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempCoupon.is_enabled),expression:\"tempCoupon.is_enabled\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"checkbox\",\"name\":\"inlineRadioOptions\",\"id\":\"coupon-is_enabled\",\"true-value\":\"1\",\"false-value\":\"0\"},domProps:{\"checked\":Array.isArray(_vm.tempCoupon.is_enabled)?_vm._i(_vm.tempCoupon.is_enabled,null)>-1:_vm._q(_vm.tempCoupon.is_enabled,\"1\")},on:{\"change\":function($event){var $$a=_vm.tempCoupon.is_enabled,$$el=$event.target,$$c=$$el.checked?(\"1\"):(\"0\");if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.tempCoupon, \"is_enabled\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.tempCoupon, \"is_enabled\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.tempCoupon, \"is_enabled\", $$c)}}}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"coupon-is_enabled\"}},[_vm._v(\"是否啟用\")])])])])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"Close\")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.updateCoupon}},[(_vm.isNew)?_c('span',[_vm._v(\"新增\")]):_c('span',[_vm._v(\"修改\")])])])])])]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"delModal\",\"tabindex\":\"-1\"}},[_c('div',{staticClass:\"modal-dialog modal-lg\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(2),_c('div',{staticClass:\"modal-body\"},[_vm._v(\"確定要刪除\"),_c('span',{staticClass:\"text-danger font-weight-bold h5\"},[_vm._v(_vm._s(_vm.tempCoupon.title))]),_vm._v(\"？\")]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"取消\")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.removeCoupon}},[_vm._v(\"確定\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"名稱\")]),_c('th',[_vm._v(\"折扣碼\")]),_c('th',[_vm._v(\"折扣\")]),_c('th',[_vm._v(\"到期日\")]),_c('th',[_vm._v(\"是否啟用\")]),_c('th',[_vm._v(\"編輯\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header bg-danger\"},[_c('h5',{staticClass:\"modal-title text-white\"},[_vm._v(\"刪除產品\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n<div>\r\n    <div class=\"d-flex justify-content-between my-2\">\r\n        <h1 class=\"h3\">優惠券列表</h1>\r\n        <button class=\"btn btn-primary\" @click=\"openModal(true)\">建立新優惠券</button>\r\n    </div>\r\n    <div class=\"card\">\r\n        <div class=\"card-header text-left h5\">優惠券總覽</div>\r\n        <div class=\"card-body\">\r\n            <table class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>名稱</th>\r\n                        <th>折扣碼</th>\r\n                        <th>折扣</th>\r\n                        <th>到期日</th>\r\n                        <th>是否啟用</th>\r\n                        <th>編輯</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"item in coupons\" :key=\"item.id\">\r\n                        <td class=\"align-middle\">{{ item.title }}</td>\r\n                        <td class=\"align-middle\">{{ item.code }}</td>\r\n                        <td class=\"align-middle\">{{ item.percent }}</td>\r\n                        <td class=\"align-middle\">{{ item.fullDate }}</td>\r\n                        <td class=\"align-middle\">\r\n                            <span v-if=\"item.is_enabled\" class=\"text-success\">啟用</span>\r\n                            <span v-else class=\"text-danger\">未啟用</span>\r\n                        </td>\r\n                        <td class=\"align-middle\">\r\n                            <div class=\"btn-group\">\r\n                                <button class=\"btn btn-outline-warning btn-sm\" @click=\"openModal(false, item)\">編輯</button>\r\n                                <button class=\"btn btn-outline-danger btn-sm\" @click=\"openDelModal(item)\">刪除</button>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- couponModal -->\r\n    <div class=\"modal fade\" id=\"couponModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-lg\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header bg-dark\">\r\n                    <h5 class=\"modal-title text-white\" id=\"exampleModalLabel\"><span v-if=\"isNew\">新增</span><span v-else>修改</span>產品</h5>\r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <form class=\"form-row\">\r\n                        <div class=\"col-4\">\r\n                            <div class=\"form-group text-left\">\r\n                                <label for=\"coupon-title\">請輸入優惠券名稱</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"coupon-title\" v-model=\"tempCoupon.title\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-4\">\r\n                            <div class=\"form-group text-left\">\r\n                                <label for=\"coupon-code\">請輸入折扣碼</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"coupon-code\" v-model=\"tempCoupon.code\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-4\">\r\n                            <div class=\"form-group text-left\">\r\n                                <label for=\"coupon-percent\">請輸入折扣</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"coupon-percent\" v-model=\"tempCoupon.percent\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-4\">\r\n                            <div class=\"form-group text-left\">\r\n                                <label for=\"coupon-date\">請輸入到期日</label>\r\n                                <input type=\"date\" class=\"form-control\" @change=\"formatDate(tempCoupon.fullDate)\" id=\"coupon-date\" v-model=\"tempCoupon.fullDate\">\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"col-4 d-flex justify-content-end align-items-center\">\r\n                            <div class=\"form-check pl-1\">\r\n                                <input class=\"form-check-input\" type=\"checkbox\" name=\"inlineRadioOptions\" id=\"coupon-is_enabled\" true-value=\"1\" false-value=\"0\" v-model=\"tempCoupon.is_enabled\">\r\n                                <label class=\"form-check-label\" for=\"coupon-is_enabled\">是否啟用</label>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" @click=\"updateCoupon\">\r\n                        <span v-if=\"isNew\">新增</span><span v-else>修改</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- delModal -->\r\n    <div class=\"modal fade\" id=\"delModal\" tabindex=\"-1\">\r\n        <div class=\"modal-dialog modal-lg\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header bg-danger\">\r\n                    <h5 class=\"modal-title text-white\">刪除產品</h5>\r\n                </div>\r\n                <div class=\"modal-body\">確定要刪除<span class=\"text-danger font-weight-bold h5\">{{ tempCoupon.title }}</span>？</div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" @click=\"removeCoupon\">確定</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            coupons: [],\r\n            tempCoupon: {},\r\n            isNew: true,\r\n        };\r\n    },\r\n    methods: {\r\n        getCoupons(page = 1) {\r\n            const vm = this;\r\n            const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupons?page:${page}`;\r\n            // vm.isLoading = true;\r\n            console.log(api)\r\n            vm.$http.get(api).then((response) => {\r\n                console.log(response.data);\r\n                vm.coupons = response.data.coupons;\r\n                // vm.isLoading = false;\r\n            });\r\n        },\r\n        openModal(newOrOld, item) {\r\n            if (newOrOld) {\r\n                this.isNew = newOrOld;\r\n                this.tempCoupon = {};\r\n            } else {\r\n                this.isNew = newOrOld;\r\n                this.tempCoupon = item;\r\n            }\r\n            $(\"#couponModal\").modal(\"show\");\r\n        },\r\n        openDelModal(item) {\r\n            this.tempCoupon = item;\r\n            $('#delModal').modal('show');\r\n        },\r\n        formatDate(date) {\r\n            const fDate = new Date(date);\r\n            this.tempCoupon.date = fDate.getTime() / 1000\r\n            console.log(this.tempCoupon.date);\r\n        },\r\n        updateCoupon() {\r\n            const vm = this;\r\n            let api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupon`;\r\n            let httpMethod = 'post';\r\n            if (!vm.isNew) {\r\n                api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupon/${vm.tempCoupon.id}`;\r\n                httpMethod = 'put';\r\n            }\r\n            vm.$http[httpMethod](api, {\r\n                data: vm.tempCoupon\r\n            }).then((response) => {\r\n                // console.log(response.data)\r\n                if (response.data.success) {\r\n                    vm.getCoupons();\r\n                    vm.tempCoupon = {};\r\n                    $('#couponModal').modal('hide');\r\n                } else {\r\n                    console.log(response.data.success)\r\n                    $('#couponModal').modal('hide')\r\n                }\r\n            })\r\n        },\r\n        removeCoupon() {\r\n            const vm = this;\r\n            const api = `${process.env.VUE_APP_APIPATH}api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupon/${vm.tempCoupon.id}`;\r\n            vm.$http.delete(api).then((response) => {\r\n                console.log(response.data);\r\n                if (response.data.success) {\r\n                    vm.getCoupons();\r\n                    $('#delModal').modal('hide');\r\n                } else {\r\n                    console.log(response.data.message);\r\n                    $('#delModal').modal('hide');\r\n                }\r\n            })\r\n        },\r\n    },\r\n    created() {\r\n        this.getCoupons();\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CouponsList.vue?vue&type=template&id=7de71412&\"\nimport script from \"./CouponsList.vue?vue&type=script&lang=js&\"\nexport * from \"./CouponsList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}